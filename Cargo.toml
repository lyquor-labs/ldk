[workspace]
members = [
    "primitives",
    "lyquid",
    "lyquid/proc",
]
exclude = ["lyquid-template"]
resolver = "3"

[workspace.package]
edition = "2024"
version = "0.0.1"
homepage = "https://lyquor.xyz/"
license = "Apache-2.0"

[workspace.dependencies]
actix = "0.13.5"
actix-rt = "2.11"
alloy-sol-types = { version = "1.5" }
anyhow = "1.0"
assert_cmd = "2.1"
async-trait = "0.1"
aws-lc-rs = { version = "1.15", default-features = false }
axum = { version = "0.8" }
bytes = "1.11"
clap = { version = "4.5.53" }
config = { version = "0.15", default-features = false, features = ["toml", "json", "yaml"] }
const-hex = "1.15"
derive_more = { version = "2.1", features = ["debug"] }
duct = "1.1"
ed25519-compact = { version = "2", default-features = false }
futures = "0.3"
http = "1.4"
http-body-util = "0.1"
hyper = { version = "1.8", features = ["http2", "server", "client"] }
hyper-util = { version = "0.1", features = ["tokio", "http2", "client", "server"] }
jsonrpsee = { version = "0.26" }
jsonschema = { version = "0.37", default-features = false }
k256 = { version = "0.13", default-features = false }
lazy_static = "1.5"
lru = "0.16.0"
lyquid = { path = "lyquid" }
lyquid-examples = { path = "lyquid-examples" }
lyquid-proc = { path = "lyquid/proc" }
lyquor-api = { path = "api" }
lyquor-cli = { path = "cli" }
lyquor-crypto = { path = "crypto" }
lyquor-db = { path = "db" }
lyquor-jsonrpc = { path = "jsonrpc" }
lyquor-net = { path = "net" }
lyquor-net-rpc = { path = "net/rpc" }
lyquor-primitives = { path = "primitives" }
lyquor-router = { path = "router" }
lyquor-seq = { path = "sequencer" }
lyquor-state = { path = "state" }
lyquor-test = { path = "test" }
lyquor-test-harness = { path = "test-harness" }
lyquor-tls = { path = "tls" }
lyquor-tools = { path = "tools" }
lyquor-upc = { path = "upc" }
lyquor-vm = { path = "vm" }
nix = { version = "0.30.1", default-features = false, features = ["signal"] }
parking_lot = { version = "0.12" }
paste = "1.0"
proc-macro2 = "1.0.103"
quote = "1.0"
rand = "0.9"
regex = "1.11.2"
rustls = { version = "0.23", features = ["aws_lc_rs"], default-features = false }
rustls-pki-types = { version = "1.13" }
rustls-webpki = { version = "0.103.8", features = ["aws-lc-rs"] }
schemars = "1.1"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0.147"
syn = "2.0"
tempfile = { version = "3.24" }
thiserror = "2.0"
tokio = { version = "1.47", features = ["full"] }
tokio-rustls = { version = "0.26" }
tokio-stream = "0.1.17"
tower = { version = "0.5" }
tracing = { version = "0.1" }
tracing-futures = "0.2.5"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }
trait-variant = "0.1"
typed-builder = "0.23"
x509-parser = "0.18.0"

# These crates run hot during Wasmtime JIT compilation (module lowering, instruction selection,
# and codegen) at *runtime*, so raising opt-level here gives most of the speedup without
# sacrificing debuggability of our own application code.
[profile.dev.package.cranelift-codegen]
opt-level = 2

[profile.dev.package.wasmtime-environ]
opt-level = 1

[profile.dev.package.wasmtime-internal-cranelift]
opt-level = 1

[profile.dev.package.cranelift-isle]
opt-level = 1
